<!-- app/views/chats/index.html.erb -->
<div class="flex">
  <div class="w-1/4 bg-gray-800 text-white p-4">
    <div class="mb-4">
      <%= link_to "Create New Chat", chats_path, method: :post, class: "bg-blue-500 text-white py-2 px-4 rounded-md block", remote: true %>
    </div>
    <!-- Add any additional sidebar content here -->
  </div>

  <div class="w-3/4 p-4">
    <% if @chats.empty? %>
      <p>No chats available.</p>
    <% else %>
      <% @chats.each do |chat| %>
        <div class="mb-8">
          <h2 class="text-2xl mb-4"><%= chat.name %></h2>
          <div class="space-y-4">
            <%= form_for @new_message, url: messages_path, html: { class: "message-form" } do |f| %>
              <%= f.hidden_field :chat_id, value: chat.id %>
              <div class="flex">
                <%= f.text_area :content, placeholder: "Type a message", rows: 3, class: "w-full resize-none rounded-lg p-2" %>
                <%= f.submit "Send", class: "bg-blue-500 text-white py-2 px-4 ml-2 rounded-md" %>
              </div>
            <% end %>

            <% chat.messages.reverse.each do |message| %>
              <div class="flex">
                <p class="font-semibold"><%= message.user.name %>:</p>
                <p class="ml-2"><%= message.content %></p>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
